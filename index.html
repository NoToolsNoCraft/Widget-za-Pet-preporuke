<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pet Profile Widget for Retail Websites</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Times New Roman', serif;
      background-color: #f3f4f6;
      color: #1f2937;
    }
    .linkedin-blue {
      color: #0a66c2;
    }
    .cta-button {
      background-color: #0a66c2;
      color: white;
      transition: background-color 0.3s ease;
    }
    .cta-button:hover {
      background-color: #004182;
    }

    /* Custom styles for Pet Centar branding */
    .pet-centar-btn {
      background-color: #f97316; /* Pet Centar's orange */
      transition: background-color 0.3s ease;
    }
    .pet-centar-btn:hover {
      background-color: #ea580c;
    }
    .pet-centar-modal {
      position: fixed;
      top: 0;
      right: -100%; /* Start off-screen to the right */
      width: 320px;
      sm:w-96;
      height: 100vh;
      background: white;
      border-left: 2px solid #f97316;
      box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
      transition: right 0.3s ease-in-out;
      z-index: 50;
      overflow-y: auto;
    }
    .pet-centar-modal.open {
      right: 0; /* Slide in from the right */
    }
    .paw-icon::before {
      content: 'üêæ';
      margin-right: 8px;
    }
    /* Ensure focus states for accessibility */
    input:focus, select:focus, button:focus {
      outline: 2px solid #f97316;
      outline-offset: 2px;
    }
    
    /* Error message styling */
    .error-message {
      color: #dc2626; /* Red for error */
      font-size: 0.875rem;
      margin-top: 0.5rem;
      display: none;
    }
    .error-message.visible {
      display: block;
    }
    /* Confirmation dialog styling */
    .confirmation-dialog {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 100;
    }
    .confirmation-dialog.open {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .confirmation-content {
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      border: 2px solid #f97316;
      max-width: 90%;
      text-align: center;
    }
    .confirmation-content button {
      margin: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 4px;
    }
    /* Sticky button styling, now positioned at top-right */
    .sticky-button {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 60;
    }


    @media (max-width: 500px) {
    .sticky-button {
      
      top: 6rem;
      
    }
}
    
    /* Enhanced remove button styling */
    .remove-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      background-color: #f97316;
      color: white;
      border-radius: 50%;
      border: 1px solid #ea580c;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .remove-button:hover {
      background-color: #ea580c;
      transform: scale(1.1);
    }
    .remove-button:focus {
      outline: 2px solid #f97316;
      outline-offset: 2px;
    }
    /* Enhanced close button styling */
    .close-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
      background-color: #f97316;
      color: white;
      border-radius: 50%;
      border: 1px solid #ea580c;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .close-button:hover {
      background-color: #ea580c;
      transform: scale(1.1);
    }
    .close-button:focus {
      outline: 2px solid #f97316;
      outline-offset: 2px;
    }
    /* Profile container styling to prevent overlap */
    .profile-container {
      display: flex;
      flex-direction: column;
      position: relative;
      padding-right: 32px; /* Space for the remove button */
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <header class="bg-white shadow">
    <div class="max-w-6xl mx-auto px-4 py-6">
      <h1 class="text-2xl font-semibold">Widget za Preporuke na Osnovu Profila Ljubimca</h1>
    </div>
  </header>

  <main class="flex-grow">
    <section class="max-w-6xl mx-auto px-4 py-10">
      <div class="grid md:grid-cols-2 gap-10 items-center">
        <div>
          <h2 class="text-3xl font-bold mb-4">Zainteresujte Vlasnike Ljubimaca Personalizovanim Preporukama</h2>
          <p class="mb-4 text-lg leading-relaxed">
            Ovaj interaktivni widget omoguƒáava va≈°im posetiocima da kreiraju profil svog ljubimca i odmah dobiju personalizovane preporuke proizvoda. Idealan je za veb-sajtove koji prodaju hranu za ljubimce, suplemente, igraƒçke i sliƒçno ‚Äî kao ≈°to je
            <a href="https://www.pet-centar.hr/" target="_blank" rel="noopener noreferrer" class="linkedin-blue underline">Pet Centar</a>.
          </p>
          <p class="mb-4 text-lg">
            Kada korisnik unese ime, vrstu, rasu i starost ljubimca, widget automatski predla≈æe odgovarajuƒáe proizvode iz va≈°e ponude ‚Äî poveƒáavajuƒái anga≈æman i konverzije.
          </p>
          <p class="mb-6 text-lg">
            Isprobajte dodatak na ovoj stranici klikom na dugme <strong class="font-semibold">"Dodaj svog ljubimca"</strong> u gornjem desnom uglu.
          </p>
          <a href="https://www.linkedin.com/in/petar-skrbic/" target="_blank" rel="noopener noreferrer">
            <button class="cta-button px-6 py-3 rounded-lg font-semibold text-white shadow-md">
              Kontaktirajte me preko LinkedIna i dodajte Widget na Va≈° Sajt
            </button>
          </a>
        </div>
        <div>
          <img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" alt="Ilustracija profila ljubimca" class="w-full max-w-md mx-auto" />
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-white border-t">
    <div class="max-w-6xl mx-auto px-4 py-6 text-center text-sm text-gray-500">
      &copy; 2025 Widget za Profil Ljubimca. Autor: <a class="underline text-blue-600" href="https://www.linkedin.com/in/petar-skrbic/" target="_blank">Petar ≈†krbiƒá</a>.
    </div>
  </footer>


<div class="sticky-button" role="region" aria-label="Widget za profil kuƒánog ljubimca">
    <button
      id="toggle-button"
      class="pet-centar-btn text-white p-3 rounded-full shadow-lg flex items-center focus:ring-2 focus:ring-orange-500"
      aria-expanded="false"
      aria-label="Otvori/zatvori obrazac za profil kuƒánog ljubimca"
    >
      <span class="paw-icon"></span>
      Dodaj svog ljubimca
    </button>
    <div id="pet-profile-modal" class="pet-centar-modal bg-white p-6" role="dialog" aria-labelledby="pet-profile-title">
      <h2 id="pet-profile-title" class="text-xl font-bold mb-4 text-gray-800">Kreiraj profil ljubimca</h2>
      <div class="mb-4">
        <label for="pet-name" class="block text-sm font-medium text-gray-700">Ime ljubimca</label>
        <input
          id="pet-name"
          type="text"
          placeholder="npr. Max"
          class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500"
          aria-required="true"
        />
      </div>
      <div class="mb-4">
        <label for="pet-type" class="block text-sm font-medium text-gray-700">Vrsta ljubimca</label>
        <select
          id="pet-type"
          class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500"
          aria-required="true"
        >
          <option value="">Odaberi vrstu</option>
          <option value="Pas">Pas</option>
          <option value="Maƒçka">Maƒçka</option>
          <option value="Ptica">Ptica</option>
          <option value="Riba">Riba</option>
        </select>
      </div>
      <div class="mb-4">
        <label for="pet-breed" class="block text-sm font-medium text-gray-700">Pasmina</label>
        <input
          id="pet-breed"
          type="text"
          placeholder="npr. Labrador"
          list="breed-suggestions"
          class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500"
          aria-required="true"
        />
        <datalist id="breed-suggestions"></datalist>
      </div>
      <div class="mb-4">
        <label for="pet-age" class="block text-sm font-medium text-gray-700">Dob (godine)</label>
        <input
          id="pet-age"
          type="number"
          placeholder="npr. 2"
          min="0"
          class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500"
          aria-required="true"
        />
      </div>
      <button
        id="save-profile"
        class="pet-centar-btn text-white p-2 rounded w-full focus:ring-2 focus:ring-orange-500"
        aria-label="Spremi profil ljubimca"
      >
        Spremi profil
      </button>
      <div id="error-message" class="error-message" role="alert">Molimo ispunite sva polja.</div>
      <button
        id="close-modal"
        class="close-button absolute top-2 right-2"
        aria-label="Zatvori obrazac za profil kuƒánog ljubimca"
      >
        ‚úï
      </button>
      <div id="profiles-list" class="mt-6"></div>
      <div id="confirmation-dialog" class="confirmation-dialog" role="dialog" aria-labelledby="confirm-title">
        <div class="confirmation-content">
          <h3 id="confirm-title" class="text-lg font-bold mb-4">Ukloni ljubimca</h3>
          <p id="confirm-message" class="mb-4">Jeste li sigurni da ≈æelite ukloniti ovog ljubimca?</p>
          <button
            id="confirm-remove"
            class="pet-centar-btn text-white focus:ring-2 focus:ring-orange-500"
            aria-label="Potvrdi uklanjanje ljubimca"
          >
            Potvrdi
          </button>
          <button
            id="cancel-remove"
            class="text-gray-500 hover:text-gray-700 focus:ring-2 focus:ring-orange-500"
            aria-label="Odustani od uklanjanja ljubimca"
          >
            Odustani
          </button>
        </div>
      </div>
    </div>
  </div>


<script>
    // Product recommendations aligned with Pet Centar catalog
    const products = {
      'Pas-Labrador': [
        { name: 'Royal Canin Labrador Retriever Adult 12kg', url: 'https://www.pet-centar.hr/katalog/royal-canin-labrador-retriever-adult-12kg/14397', price: '71.99‚Ç¨' },
        { name: 'FORESTO Ovratnik za pse 70cm', url: 'https://www.pet-centar.hr/katalog/foresto-ovratnik-za-pse-70cm/15545', price: '35.99‚Ç¨' }
      ],
      'Pas-Beagle': [
        { name: 'BRIT Premium by Nature Adult M 15kg', url: 'https://www.pet-centar.hr/katalog/brit-premium-by-nature-adult-m-15kg/15204', price: '49.99‚Ç¨' }
      ],
      'Maƒçka-Persian': [
        { name: 'Canagan Cat Free Run Chicken 4kg', url: 'https://www.pet-centar.hr/katalog/canagan-cat-free-run-chicken-4kg/15987', price: '45.99‚Ç¨' },
        { name: 'FYPRYST Combo Cat 0.5ml', url: 'https://www.pet-centar.hr/katalog/fypryst-combo-cat-0-5ml/15123', price: '12.99‚Ç¨' }
      ],
      'Maƒçka-Maine Coon': [
        { name: 'Royal Canin Maine Coon 10kg', url: 'https://www.pet-centar.hr/katalog/royal-canin-maine-coon-10kg/14392', price: '69.99‚Ç¨' }
      ],
      'default': [
        { name: 'Istra≈æi sve proizvode', url: 'https://www.pet-centar.hr/katalog', price: '' }
      ]
    };

    // Breed suggestions for each pet type
    const breedSuggestions = {
      'Pas': ['Labrador', 'Beagle', 'Njemaƒçki ovƒçar', 'Zlatni retriver', 'Pudlica'],
      'Maƒçka': ['Perzijska', 'Maine Coon', 'Sijamska', 'Bengalska', 'Britanska kratkodlaka'],
      'Ptica': ['Papiga', 'Kanarinac', 'Korela', 'Tigrica', 'Ara'],
      'Riba': ['Zlatna ribica', 'Betta', 'Guppy', 'Neonka', 'Diskus'],
      '': []
    };

    // DOM elements
    const toggleButton = document.getElementById('toggle-button');
    const modal = document.getElementById('pet-profile-modal');
    const closeButton = document.getElementById('close-modal');
    const saveButton = document.getElementById('save-profile');
    const petNameInput = document.getElementById('pet-name');
    const petTypeSelect = document.getElementById('pet-type');
    const petBreedInput = document.getElementById('pet-breed');
    const breedSuggestionsList = document.getElementById('breed-suggestions');
    const petAgeInput = document.getElementById('pet-age');
    const profilesList = document.getElementById('profiles-list');
    const errorMessage = document.getElementById('error-message');
    const confirmationDialog = document.getElementById('confirmation-dialog');
    const confirmRemoveButton = document.getElementById('confirm-remove');
    const cancelRemoveButton = document.getElementById('cancel-remove');
    const confirmMessage = document.getElementById('confirm-message');

    // Load saved profiles from localStorage
    let profiles = JSON.parse(localStorage.getItem('petProfiles') || '[]');
    let profileToRemove = null;

    // Get product recommendations
    function getRecommendations(profile) {
      const key = `${profile.type}-${profile.breed}`;
      return products[key] || products['default'];
    }

    // Update breed suggestions based on pet type and user input
    function updateBreedSuggestions() {
      const selectedType = petTypeSelect.value;
      const userInput = petBreedInput.value.trim().toLowerCase();
      breedSuggestionsList.innerHTML = '';
      const breeds = breedSuggestions[selectedType] || [];
      const filteredBreeds = userInput
        ? breeds.filter(breed => breed.toLowerCase().startsWith(userInput))
        : breeds;
      filteredBreeds.forEach(breed => {
        const option = document.createElement('option');
        option.value = breed;
        breedSuggestionsList.appendChild(option);
      });
    }

    // Render profiles
    function renderProfiles() {
      profilesList.innerHTML = '';
      if (profiles.length > 0) {
        const header = document.createElement('h3');
        header.className = 'text-lg font-bold mb-2 text-gray-800';
        header.textContent = 'Va≈°i ljubimci';
        profilesList.appendChild(header);

        profiles.forEach((profile, index) => {
          const profileDiv = document.createElement('div');
          profileDiv.className = 'mb-4 border-b pb-2 profile-container';

          const profileInfo = document.createElement('p');
          profileInfo.className = 'font-bold text-gray-800';
          profileInfo.textContent = `${profile.name} (${profile.type}, ${profile.breed}, ${profile.age} godina)`;
          profileDiv.appendChild(profileInfo);

          const removeButton = document.createElement('button');
          removeButton.className = 'remove-button absolute top-0 right-0';
          removeButton.innerHTML = '‚úï';
          removeButton.setAttribute('aria-label', `Ukloni ljubimca ${profile.name}`);
          removeButton.addEventListener('click', () => {
            profileToRemove = index;
            confirmMessage.textContent = `Jeste li sigurni da ≈æelite ukloniti ljubimca ${profile.name}?`;
            confirmationDialog.classList.add('open');
            confirmRemoveButton.focus();
          });
          profileDiv.appendChild(removeButton);

          const recHeader = document.createElement('h4');
          recHeader.className = 'text-sm font-medium mt-2';
          recHeader.textContent = `Preporuƒçeno za ${profile.name}`;
          profileDiv.appendChild(recHeader);

          const recommendations = getRecommendations(profile);
          recommendations.forEach(product => {
            const link = document.createElement('a');
            link.href = product.url;
            link.className = 'block text-blue-600 hover:underline mt-1';
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            link.textContent = product.name + (product.price ? ` (${product.price})` : '');
            profileDiv.appendChild(link);
          });

          profilesList.appendChild(profileDiv);
        });
      }
    }

    // Save profile
    function saveProfile() {
      const name = petNameInput.value.trim();
      const type = petTypeSelect.value;
      const breed = petBreedInput.value.trim();
      const age = petAgeInput.value;

      if (!name || !type || !breed || !age) {
        errorMessage.classList.add('visible');
        errorMessage.focus();
        return;
      }

      errorMessage.classList.remove('visible');
      const newProfile = { name, type, breed, age };
      profiles.push(newProfile);
      localStorage.setItem('petProfiles', JSON.stringify(profiles));
      petNameInput.value = '';
      petTypeSelect.value = '';
      petBreedInput.value = '';
      petAgeInput.value = '';
      updateBreedSuggestions();
      renderProfiles();
      petNameInput.focus();
    }

    // Remove profile
    function removeProfile() {
      if (profileToRemove !== null) {
        profiles.splice(profileToRemove, 1);
        localStorage.setItem('petProfiles', JSON.stringify(profiles));
        profileToRemove = null;
        confirmationDialog.classList.remove('open');
        renderProfiles();
        petNameInput.focus();
      }
    }

    // Toggle modal
    function toggleModal() {
      const isOpen = modal.classList.toggle('open');
      toggleButton.setAttribute('aria-expanded', isOpen);
      if (isOpen) {
        petNameInput.focus();
        errorMessage.classList.remove('visible');
        updateBreedSuggestions();
      }
      confirmationDialog.classList.remove('open');
    }

    // Handle keyboard navigation
    function handleKeyDown(e) {
      if (e.key === 'Escape') {
        modal.classList.remove('open');
        toggleButton.setAttribute('aria-expanded', 'false');
        errorMessage.classList.remove('visible');
        confirmationDialog.classList.remove('open');
        toggleButton.focus();
      }
    }

    // Event listeners
    toggleButton.addEventListener('click', toggleModal);
    closeButton.addEventListener('click', () => {
      modal.classList.remove('open');
      toggleButton.setAttribute('aria-expanded', 'false');
      errorMessage.classList.remove('visible');
    });
    saveButton.addEventListener('click', saveProfile);
    modal.addEventListener('keydown', handleKeyDown);
    confirmRemoveButton.addEventListener('click', removeProfile);
    cancelRemoveButton.addEventListener('click', () => {
      confirmationDialog.classList.remove('open');
      profileToRemove = null;
      modal.classList.add('open');
      petNameInput.focus();
    });
    petTypeSelect.addEventListener('change', updateBreedSuggestions);
    petBreedInput.addEventListener('input', updateBreedSuggestions);

    // Initial render
    renderProfiles();
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'966ce74cbb89a900',t:'MTc1Mzc5NTEyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'966cec5e5b46bfc5',t:'MTc1Mzc5NTMyNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'966cf0fd4f3db093',t:'MTc1Mzc5NTUxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'966cf58f2abd5911',t:'MTc1Mzc5NTcwNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
